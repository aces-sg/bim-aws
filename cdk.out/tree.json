{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.204.0"},"children":{"NginxProxyStackThree":{"id":"NginxProxyStackThree","path":"NginxProxyStackThree","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"NginxVpc":{"id":"NginxVpc","path":"NginxProxyStackThree/NginxVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.204.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"NginxProxyStackThree/NginxVpc/PublicSubnet1"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"Acl":{"id":"Acl","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc/PublicSubnet1"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"NginxVpcPublicSubnet1RouteTableDE29045F"},"subnetId":{"Ref":"NginxVpcPublicSubnet1SubnetFD3CAA71"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"NginxProxyStackThree/NginxVpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"NginxVpcIGW5BF51E51"},"routeTableId":{"Ref":"NginxVpcPublicSubnet1RouteTableDE29045F"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.204.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"NginxProxyStackThree/NginxVpc/PublicSubnet2"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"Acl":{"id":"Acl","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc/PublicSubnet2"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"NginxVpcPublicSubnet2RouteTableD2BFAC61"},"subnetId":{"Ref":"NginxVpcPublicSubnet2Subnet070965F9"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"NginxProxyStackThree/NginxVpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"NginxVpcIGW5BF51E51"},"routeTableId":{"Ref":"NginxVpcPublicSubnet2RouteTableD2BFAC61"}}}}}},"IsolatedSubnet1":{"id":"IsolatedSubnet1","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.204.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"Acl":{"id":"Acl","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"NginxVpcIsolatedSubnet1RouteTable7BA216E2"},"subnetId":{"Ref":"NginxVpcIsolatedSubnet1Subnet9CA57C33"}}}}}},"IsolatedSubnet2":{"id":"IsolatedSubnet2","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.204.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"Acl":{"id":"Acl","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"NginxProxyStackThree/NginxVpc/IsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"NginxVpcIsolatedSubnet2RouteTable5365FB87"},"subnetId":{"Ref":"NginxVpcIsolatedSubnet2SubnetB99DDB07"}}}}}},"IGW":{"id":"IGW","path":"NginxProxyStackThree/NginxVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"NginxProxyStackThree/NginxVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"NginxVpcIGW5BF51E51"},"vpcId":{"Ref":"NginxVpcFE1B165E"}}}}}},"AlbSecurityGroup":{"id":"AlbSecurityGroup","path":"NginxProxyStackThree/AlbSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/AlbSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for ALB","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow HTTP traffic"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":443,"toPort":443,"description":"Allow HTTPS traffic"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}}}},"NginxSecurityGroup":{"id":"NginxSecurityGroup","path":"NginxProxyStackThree/NginxSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Nginx instances","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow HTTP traffic from ALB"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":22,"toPort":22,"description":"Allow SSH access"}],"vpcId":{"Ref":"NginxVpcFE1B165E"}}}},"from NginxProxyStackThreeAlbSecurityGroup376B0B00:80":{"id":"from NginxProxyStackThreeAlbSecurityGroup376B0B00:80","path":"NginxProxyStackThree/NginxSecurityGroup/from NginxProxyStackThreeAlbSecurityGroup376B0B00:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":80,"groupId":{"Fn::GetAtt":["NginxSecurityGroupFD5E8C12","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]},"toPort":80}}}}},"NginxAlb":{"id":"NginxAlb","path":"NginxProxyStackThree/NginxAlb","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxAlb/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["AlbSecurityGroup86A59E99","GroupId"]}],"subnets":[{"Ref":"NginxVpcPublicSubnet1SubnetFD3CAA71"},{"Ref":"NginxVpcPublicSubnet2Subnet070965F9"}],"type":"application"}}},"Redirect80To443":{"id":"Redirect80To443","path":"NginxProxyStackThree/NginxAlb/Redirect80To443","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxAlb/Redirect80To443/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"redirect","redirectConfig":{"statusCode":"HTTP_301","port":"443","protocol":"HTTPS"}}],"loadBalancerArn":{"Ref":"NginxAlb10923154"},"port":80,"protocol":"HTTP"}}}}},"HttpsListener":{"id":"HttpsListener","path":"NginxProxyStackThree/NginxAlb/HttpsListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxAlb/HttpsListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"certificates":[{"certificateArn":{"Ref":"NginxCertificate26E222C0"}}],"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"NginxTargetGroup6C5FCDE3"}}],"loadBalancerArn":{"Ref":"NginxAlb10923154"},"port":443,"protocol":"HTTPS"}}},"DefaultCertificates1":{"id":"DefaultCertificates1","path":"NginxProxyStackThree/NginxAlb/HttpsListener/DefaultCertificates1","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerCertificate","version":"2.204.0"},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxAlb/HttpsListener/DefaultCertificates1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerCertificate","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerCertificate","aws:cdk:cloudformation:props":{"certificates":[{"certificateArn":{"Ref":"NginxCertificateBimeco092251A9"}}],"listenerArn":{"Ref":"NginxAlbHttpsListenerDE052181"}}}}}}}}}},"NginxCertificate":{"id":"NginxCertificate","path":"NginxProxyStackThree/NginxCertificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxCertificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"bim.com.sg","subjectAlternativeNames":["*.bim.com.sg"],"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxCertificate"}],"validationMethod":"DNS"}}}}},"NginxCertificateBimeco":{"id":"NginxCertificateBimeco","path":"NginxProxyStackThree/NginxCertificateBimeco","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxCertificateBimeco/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"bimeco.io","subjectAlternativeNames":["*.bimeco.io"],"tags":[{"key":"Name","value":"NginxProxyStackThree/NginxCertificateBimeco"}],"validationMethod":"DNS"}}}}},"NginxLaunchTemplate-v2":{"id":"NginxLaunchTemplate-v2","path":"NginxProxyStackThree/NginxLaunchTemplate-v2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.LaunchTemplate","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxLaunchTemplate-v2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnLaunchTemplate","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::LaunchTemplate","aws:cdk:cloudformation:props":{"launchTemplateData":{"imageId":"ami-0672fd5b9210aa093","instanceType":"t2.micro","keyName":"default-bim","securityGroupIds":[{"Fn::GetAtt":["NginxSecurityGroupFD5E8C12","GroupId"]}],"tagSpecifications":[{"resourceType":"instance","tags":[{"key":"Name","value":"NginxProxyStackThree/NginxLaunchTemplate-v2"}]},{"resourceType":"volume","tags":[{"key":"Name","value":"NginxProxyStackThree/NginxLaunchTemplate-v2"}]}],"userData":{"Fn::Base64":"#!/bin/bash\n#!/bin/bash\nsudo apt-get update -y\nsudo apt-get install -y nginx\ncat > /etc/nginx/sites-available/default <<'EOF'\nserver {\n    listen 80 default_server;\n    listen [::]:80 default_server;\n    server_name _;\n\n    location /blog/_next {\n        proxy_pass https://blog.bimeco.io/blog/_next;\n        proxy_set_header Host blog.bimeco.io;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_ssl_server_name on;\n    }\n\n    location /blog {\n        proxy_pass https://blog.bimeco.io/blog;\n        proxy_set_header Host blog.bimeco.io;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_ssl_server_name on;\n    }\n\n    location /career/_next {\n        proxy_pass https://jobs.bimeco.io/career/_next;\n        proxy_set_header Host jobs.bimeco.io;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_ssl_server_name on;\n        proxy_redirect https://jobs.bimeco.io/career/ /jobs/;\n        proxy_connect_timeout 60s;\n        proxy_read_timeout 60s;\n    }\n\n    location /career {\n        proxy_pass https://jobs.bimeco.io/career;\n        proxy_set_header Host jobs.bimeco.io;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_ssl_server_name on;\n        proxy_connect_timeout 60s;\n        proxy_read_timeout 60s;\n    }\n\n    location / {\n        proxy_pass https://static.bim.com.sg;\n        proxy_set_header Host static.bim.com.sg;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_ssl_server_name on;\n    }\n\n    location /health {\n        access_log off;\n        return 200 'Healthy';\n    }\n\n    error_page 404 /404.html;\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}\nEOF\n\nsudo nginx -t\nsudo systemctl restart nginx\nsudo systemctl enable nginx\n"}},"tagSpecifications":[{"resourceType":"launch-template","tags":[{"key":"Name","value":"NginxProxyStackThree/NginxLaunchTemplate-v2"}]}]}}}}},"NginxAsg":{"id":"NginxAsg","path":"NginxProxyStackThree/NginxAsg","constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.AutoScalingGroup","version":"2.204.0","metadata":[]},"children":{"ASG":{"id":"ASG","path":"NginxProxyStackThree/NginxAsg/ASG","constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.CfnAutoScalingGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AutoScaling::AutoScalingGroup","aws:cdk:cloudformation:props":{"healthCheckGracePeriod":1800,"healthCheckType":"ELB","launchTemplate":{"launchTemplateId":{"Ref":"NginxLaunchTemplatev2E8577933"},"version":{"Fn::GetAtt":["NginxLaunchTemplatev2E8577933","LatestVersionNumber"]}},"maxSize":"4","minSize":"3","targetGroupArns":[{"Ref":"NginxTargetGroup6C5FCDE3"}],"vpcZoneIdentifier":[{"Ref":"NginxVpcPublicSubnet1SubnetFD3CAA71"},{"Ref":"NginxVpcPublicSubnet2Subnet070965F9"}]}}}}},"NginxTargetGroup":{"id":"NginxTargetGroup","path":"NginxProxyStackThree/NginxTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.204.0"},"children":{"Resource":{"id":"Resource","path":"NginxProxyStackThree/NginxTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckPath":"/health","matcher":{"httpCode":"200-399"},"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"instance","vpcId":{"Ref":"NginxVpcFE1B165E"}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"NginxProxyStackThree/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"NginxProxyStackThree/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"NginxProxyStackThree/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"NginxProxyStackThree/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"NginxProxyStackThree/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}